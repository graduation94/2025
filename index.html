<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Graduation Team – Check Your Order</title>
  <style>
    @font-face {
      font-family: 'GEThuluth';
      src: url('./GE-Thuluth-Light.otf') format('opentype');
      font-weight: 300;
      font-style: normal;
      font-display: swap;
    }
    :root {
      --bg:#0f0f10;
      --panel:#141416;
      --text:#e9e9ea;
      --muted:#a9abb3;
      --gold:#D4AF37;
      --danger:#ff6b6b;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --ring:0 0 0 2px rgba(212,175,55,.3), 0 0 24px rgba(212,175,55,.18);
    }
    *{box-sizing:border-box;}
    html,body{height:100%;margin:0;padding:0;}
    body{
      background:var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      text-align:center;
      background:radial-gradient(1200px 600px at 85% -10%, rgba(212,175,55,.06), transparent 60%), var(--bg);
    }

    .logo{width:100px;height:100px;margin-bottom:20px;}
    .logo img{width:100%;height:auto;border-radius:16px;box-shadow:var(--shadow);}

    h1{font-size:32px;font-weight:800;color:var(--gold);margin:10px 0 5px 0;letter-spacing:.5px;}
    h2{font-size:20px;font-weight:600;margin:0 0 30px 0;color:var(--text);}

    .search-box{
      display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;
      background:var(--panel);padding:30px 24px;border-radius:var(--radius);box-shadow:var(--shadow);
      width:min(400px,90%);
    }

    .input{
      width:100%;background:#0c0c0e;border:1px solid rgba(255,255,255,.08);
      border-radius:14px;padding:14px 16px;color:var(--text);font-size:16px;text-align:center;
      outline:none;transition:box-shadow .2s,border-color .2s;
    }
    .input:focus{border-color:var(--gold);box-shadow:var(--ring);}
    .input::-webkit-outer-spin-button,.input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}
    .input[type=number]{-moz-appearance:textfield;}

    .btn{
      background:linear-gradient(90deg, #d4af37, #c6a033);
      color:#1a1a1a;border:0;border-radius:50px;padding:14px 24px;font-weight:800;
      cursor:pointer;box-shadow:0 8px 22px rgba(212,175,55,.25);
      transition:transform .1s ease, filter .2s ease, background .2s ease;
      width:60%;font-size:16px;text-transform:uppercase;letter-spacing:1px;
    }
    .btn:hover{filter:brightness(1.05);background:linear-gradient(90deg,#e1be46,#d4af37);}
    .btn:active{transform:translateY(1px);}

    .message{
      margin-top:16px;padding:10px 16px;border-radius:10px;font-weight:600;
      display:none;
    }
    .error{background:rgba(255,107,107,0.15);border:1px solid var(--danger);color:var(--danger);}

    .result{
      margin-top:25px;background:var(--panel);padding:22px;border-radius:var(--radius);
      box-shadow:var(--shadow);width:min(400px,90%);
      animation:fadeIn .6s ease forwards;
    }

    @keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}

    .row{margin:10px 0;text-align:left;}
    .label{font-size:14px;color:var(--muted);}
    .value{font-size:18px;font-weight:700;}

    .thuluth{font-family:'GEThuluth',serif;letter-spacing:.2px;}
    .big{font-size:28px;}

    .footer{margin-top:30px;color:var(--muted);font-size:14px;}
  </style>
</head>
<body>
  <div class="logo">
    <img src="./logo.png" alt="Graduation Team Logo" />
  </div>

  <h1>Graduation Team</h1>
  <h2>Check your graduation order</h2>

  <div class="search-box">
    <input id="seat" class="input" type="number" inputmode="numeric" placeholder="Enter your seat number" />
    <button id="go" class="btn">Check Order</button>
    <div id="message" class="message error"></div>
  </div>

  <div id="result" class="result" style="display:none">
    <div class="row">
      <div class="label">Order Type</div>
      <div class="value" id="orderType">—</div>
    </div>
    <div class="row" id="nameRow" style="display:none">
      <div class="label">Name on Robe</div>
      <div class="value thuluth big" id="robeName">—</div>
    </div>
    <div class="row">
      <div class="label">Size</div>
      <div class="value" id="robeSize">—</div>
    </div>
    <div class="row" id="titleRow" style="display:none">
      <div class="label">Title</div>
      <div class="value thuluth big" id="titleVal">—</div>
    </div>
  </div>

  <div class="footer">Programmed by Albara</div>

  <script>
    const DATA_URL = './orders.json';

    function hasRobe(orderType=''){
      const t = (orderType || '').toString().toLowerCase();
      return t.includes('robe') || t.includes('full');
    }

    async function loadData(){
      const res = await fetch(DATA_URL,{cache:'no-store'});
      if(!res.ok) throw new Error('Failed to load data');
      return res.json();
    }

    function findBySeat(data,seat){
      const s=(seat||'').trim();
      return data.find(r=>(r.seat_number||'').trim()===s);
    }

    function showMessage(text){
      const msg=document.getElementById('message');
      msg.textContent=text;
      msg.style.display='block';
    }
    function hideMessage(){
      const msg=document.getElementById('message');
      msg.style.display='none';
    }

    function render(record){
      document.getElementById('orderType').textContent=record.order_type||'—';
      document.getElementById('robeSize').textContent=record.size||'—';
      const nameRow=document.getElementById('nameRow');
      const titleRow=document.getElementById('titleRow');

      if(hasRobe(record.order_type)&&record.name_on_robe){
        nameRow.style.display='';
        document.getElementById('robeName').textContent=record.name_on_robe;
      }else{
        nameRow.style.display='none';
      }

      if(record.title){
        titleRow.style.display='';
        document.getElementById('titleVal').textContent=record.title;
      }else{
        titleRow.style.display='none';
      }
      document.getElementById('result').style.display='';
    }

    async function onSearch(){
      hideMessage();
      document.getElementById('result').style.display='none';
      const seat=document.getElementById('seat').value;
      if(!seat){showMessage('Please enter your seat number.');return;}
      try{
        const data=await loadData();
        const rec=findBySeat(data,seat);
        if(!rec){showMessage('No record found for this seat number.');return;}
        render(rec);
      }catch(err){
        console.error(err);
        showMessage('An error occurred while loading data.');
      }
    }

    document.getElementById('go').addEventListener('click',onSearch);
    document.getElementById('seat').addEventListener('keydown',e=>{if(e.key==='Enter')onSearch();});
  </script>
</body>
</html>
