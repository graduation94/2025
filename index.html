<script>
  const input = document.getElementById('seat');
  const btn = document.getElementById('checkBtn');
  const resultDiv = document.getElementById('result');

  // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') btn.click();
  });

  btn.addEventListener('click', async () => {
    const seat = input.value.trim();
    resultDiv.innerHTML = '';

    if (!seat) {
      resultDiv.innerHTML = `<div class="message">Please enter your seat number.</div>`;
      return;
    }

    // ğŸ”„ Ø¥Ø¸Ù‡Ø§Ø± loader Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«
    resultDiv.innerHTML = `<div class="loader"></div>`;

    try {
      const res = await fetch('./orders_no_title.json?nocache=' + Date.now());
      const data = await res.json();
      const student = data.find(x => x.seat_number == seat);

      if (!student) {
        resultDiv.innerHTML = `
          <div class="message">
            This websiteâ€™s data was last updated on <b>Thursday at 11:00 PM</b>.<br>
            If your record doesnâ€™t appear yet, please check back later.
          </div>`;
        return;
      }

      // âœ… Ù„Ùˆ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠÙ‡ ÙƒÙ„Ù…Ø© "Items" ÙÙ‚Ø· ÙŠØ¹Ø±Ø¶ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨
      const isItems = student.order_type && student.order_type.toLowerCase().includes('item');

      if (isItems) {
        resultDiv.innerHTML = `
          <div class="result">
            <div class="order-type">Order Type: ${student.order_type || '-'}</div>
            <div class="size">Order Number: ${student.order || '-'}</div>
          </div>`;
      } else {
        resultDiv.innerHTML = `
          <div class="result">
            <div class="order-type">Order Type: ${student.order_type || '-'}</div>
            <div class="name">${student.name_on_robe || ''}</div>
            <div class="size">Size: ${student.size || '-'}</div>
            <div class="size">Order Number: ${student.order || '-'}</div>
          </div>`;
      }

      input.value = ''; // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ø­Ø«
    } catch {
      resultDiv.innerHTML = `<div class="message">Error loading data. Please try again.</div>`;
    }
  });
</script>
